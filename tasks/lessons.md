# Lessons Learned

- 日期：2026-02-26
  - 用户纠正：新增必须支持 Kaku 终端；Homebrew 保持第二阶段；不做联网云同步。
  - 暴露问题：前期终端支持列表未一次性冻结，导致后续补充需求。
  - 预防规则：进入方案阶段时先输出“终端兼容矩阵 + 非目标清单”让用户确认，再进入细化设计。

- 日期：2026-02-26
  - 用户纠正：Finder 入口优先级改为“工具栏优先”；跨目录多选默认“多窗口”；发布工作后置到联调/自测后。
  - 暴露问题：交互默认值和发布节奏未在第一轮方案中显式冻结。
  - 预防规则：在方案评审时必须单列“默认交互值 + 发布门禁”并让用户确认。

- 日期：2026-02-26
  - 文档审计发现：跨文档存在细节漂移（如 Bundle ID、Phase 1/Phase 2 边界、命令安全表述）。
  - 暴露问题：缺少统一的“事实源”导致规格细节不一致。
  - 预防规则：关键事实（Bundle ID、安装命令、发布阶段边界）集中维护在矩阵/清单文档，并在每轮修订后做一致性检查。

- 日期：2026-02-26
  - 实施阶段发现：工作目录位于上层 Git 仓库中，存在误提交风险。
  - 暴露问题：项目初始化时未先确认仓库边界。
  - 预防规则：开工前固定执行 `git rev-parse --show-toplevel`，如不匹配项目目录则先初始化独立仓库。

- 日期：2026-02-26
  - 用户纠正：按先前指引操作后仍找不到 Finder 扩展开关与入口。
  - 暴露问题：仅给了 UI 操作步骤，未先验证扩展是否完成系统注册（`pluginkit`）与签名前置条件。
  - 预防规则：所有 Finder 扩展联调指导必须先执行三项检查：`appex` 是否内嵌、`entitlements` 是否存在、`pluginkit -m -p com.apple.FinderSync` 是否可见。
